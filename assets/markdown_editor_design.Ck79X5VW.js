import{_ as m}from"./ValaxyMain.vue_vue_type_style_index_0_lang.D_6hHWyA.js";import"./chunks/@vueuse/motion.CfOaydB9.js";import{e as f,u as g,a as h}from"./chunks/vue-router.CvZ47zR_.js";import{aa as b,ap as a,ag as s,af as n,ai as l,F as k,ab as w,Z as M}from"./framework.Dtj2FOgl.js";import"./app.m-ACVQqa.js";import"./chunks/dayjs.BdcnXKr1.js";import"./chunks/vue-i18n.-J8ISBuY.js";import"./chunks/pinia.ecF83nE_.js";/* empty css                    */import"./chunks/nprogress.B6x19dEb.js";import"./YunComment.vue_vue_type_style_index_0_lang.sMBsxs-r.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.BnNbMMRz.js";import"./post.CfF3IXMF.js";const v=f("/posts/2025/markdown_editor_design",async t=>JSON.parse('{"title":"MarkDown编辑器的设计","description":"","frontmatter":{"title":"MarkDown编辑器的设计","date":"2025-10-28 21:10:00","updated":"2025-10-28 21:10:00","categories":["技术"],"tags":["C/C++","Qt"]},"headers":[],"relativePath":"pages/posts/2025/markdown_editor_design.md","lastUpdated":1766588262000}'),{lazy:(t,o)=>t.name===o.name}),N={__name:"markdown_editor_design",setup(t,{expose:o}){const{data:i}=v(),p=h(),d=g(),r=Object.assign(d.meta.frontmatter||{},i.value?.frontmatter||{});return p.currentRoute.value.data=i.value,M("valaxy:frontmatter",r),globalThis.$frontmatter=r,o({frontmatter:{title:"MarkDown编辑器的设计",date:"2025-10-28 21:10:00",updated:"2025-10-28 21:10:00",categories:["技术"],tags:["C/C++","Qt"]}}),(e,u)=>{const c=m;return w(),b(c,{frontmatter:k(r)},{"main-content-md":a(()=>[...u[0]||(u[0]=[n("h1",{id:"markdown编辑器",tabindex:"-1"},[l("Markdown编辑器 "),n("a",{class:"header-anchor",href:"#markdown编辑器","aria-label":'Permalink to "Markdown编辑器"'},"​")],-1),n("h2",{id:"想法",tabindex:"-1"},[l("想法 "),n("a",{class:"header-anchor",href:"#想法","aria-label":'Permalink to "想法"'},"​")],-1),n("p",null,"咕咕咕",-1),n("h2",{id:"库",tabindex:"-1"},[l("库 "),n("a",{class:"header-anchor",href:"#库","aria-label":'Permalink to "库"'},"​")],-1),n("p",null,"Qt+cmark-gfm",-1),n("p",null,"包管理依旧vcpkg(那我还装Qt干嘛,算了部分依赖吧)",-1),n("h2",{id:"设计",tabindex:"-1"},[l("设计 "),n("a",{class:"header-anchor",href:"#设计","aria-label":'Permalink to "设计"'},"​")],-1),n("p",null,"基本就看着typora来写",-1),n("ul",null,[n("li",null,[n("p",null,"模式一：代码模式 (编辑模式)"),n("ul",null,[n("li",null,[n("strong",null,"主控件"),l("： "),n("code",null,"QPlainTextEdit")]),n("li",null,[n("strong",null,"核心功能"),l("： "),n("ol",null,[n("li",null,[n("strong",null,"语法高亮"),l("： 使用 "),n("code",null,"QSyntaxHighlighter"),l(" 子类，为不同的 Markdown 元素（如 "),n("code",null,"# Header"),l(", "),n("code",null,"**bold**"),l(", "),n("code",null,"code"),l("）设置不同的文本格式（颜色、字体粗细等）。")]),n("li",null,[n("strong",null,"简易渲染"),l("： 这可以理解为“所见即所得”的轻度增强。 "),n("ul",null,[n("li",null,[l("你可以通过修改 "),n("code",null,"QTextDocument"),l(" 的样式，让标题显示得更大更粗，让图片链接显示一个占位符图标等。")]),n("li",null,"但这仍然在一个可编辑的文本控件中完成，并非真正的 HTML 渲染。Qt 的富文本能力足以实现不错的“简易渲染”效果。")])])])])])]),n("li",null,[n("p",null,"模式二：预览模式 (阅读模式)")]),n("li",null,[n("p",null,[n("strong",null,"架构"),l("： 使用 "),n("code",null,"QSplitter"),l(" 水平分割窗口。")]),n("ul",null,[n("li",null,[n("strong",null,"左侧"),l("： "),n("code",null,"QPlainTextEdit"),l(" (代码模式用的同一个控件)。")]),n("li",null,[n("strong",null,"右侧"),l("： "),n("code",null,"QWebEngineView"),l("。")])])])],-1),n("h2",{id:"架构",tabindex:"-1"},[l("架构 "),n("a",{class:"header-anchor",href:"#架构","aria-label":'Permalink to "架构"'},"​")],-1),n("p",null,[l("我采用 "),n("strong",null,"Model-View-Presenter (MVP)"),l(" 或 "),n("strong",null,"Model-View-ViewModel (MVVM)"),l(" 的变体")],-1),n("div",{class:"language-"},[n("button",{title:"Copy code",class:"copy"}),n("span",{class:"lang"}),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",null,"┌─────────────────────────────────────────────────┐")]),l(`
`),n("span",{class:"line"},[n("span",null,"│                   表现层 (View)                  │")]),l(`
`),n("span",{class:"line"},[n("span",null,"├─────────────────────────────────────────────────┤")]),l(`
`),n("span",{class:"line"},[n("span",null,"│ 主窗口 (MainWindow)                             │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 编辑器视图 (EditorView) - QPlainTextEdit    │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 预览视图 (PreviewView) - QWebEngineView     │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 工具栏、菜单栏等                            │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  └─ 视图接口 (IView)                            │")]),l(`
`),n("span",{class:"line"},[n("span",null,"├─────────────────────────────────────────────────┤")]),l(`
`),n("span",{class:"line"},[n("span",null,"│                   presenter层                   │")]),l(`
`),n("span",{class:"line"},[n("span",null,"├─────────────────────────────────────────────────┤")]),l(`
`),n("span",{class:"line"},[n("span",null,"│ 编辑器Presenter (EditorPresenter)               │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 处理视图事件                                │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 协调模型操作                                │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  └─ 更新视图状态                                │")]),l(`
`),n("span",{class:"line"},[n("span",null,"├─────────────────────────────────────────────────┤")]),l(`
`),n("span",{class:"line"},[n("span",null,"│                   模型层 (Model)                │")]),l(`
`),n("span",{class:"line"},[n("span",null,"├─────────────────────────────────────────────────┤")]),l(`
`),n("span",{class:"line"},[n("span",null,"│ 文档模型 (DocumentModel)                        │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 原始Markdown内容                            │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  ├─ 解析后的HTML内容                            │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  └─ 文档元数据                                  │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  Markdown解析器 (MarkdownParser)                │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  语法高亮器 (SyntaxHighlighter)                 │")]),l(`
`),n("span",{class:"line"},[n("span",null,"│  文件操作器 (FileManager)                       │")]),l(`
`),n("span",{class:"line"},[n("span",null,"└─────────────────────────────────────────────────┘")])])]),n("button",{class:"code-block-unfold-btn"})],-1),n("p",null,[l("好耶是新架构, 说实话感觉我都没接触到"),n("strong",null,"MVC"),l("架构的精髓")],-1),n("p",null,[l("不过我自己基本没什么用成型架构编写过Qt应用("),n("s",null,"其实也没写过多少Qt"),l("), 基本上就是往"),n("code",null,"main"),l("函数堆(参考基于Slint和C++的音乐播放器, "),n("code",null,"main"),l("函数写成答辩了)")],-1),n("p",null,[l("代码已经开源, "),n("a",{href:"https://github.com/Yxz12-ye/md_editor",target:"_blank",rel:"noreferrer"},"仓库地址")],-1)])]),"main-header":a(()=>[s(e.$slots,"main-header")]),"main-header-after":a(()=>[s(e.$slots,"main-header-after")]),"main-nav":a(()=>[s(e.$slots,"main-nav")]),"main-content-before":a(()=>[s(e.$slots,"main-content-before")]),"main-content":a(()=>[s(e.$slots,"main-content")]),"main-content-after":a(()=>[s(e.$slots,"main-content-after")]),"main-nav-before":a(()=>[s(e.$slots,"main-nav-before")]),"main-nav-after":a(()=>[s(e.$slots,"main-nav-after")]),comment:a(()=>[s(e.$slots,"comment")]),footer:a(()=>[s(e.$slots,"footer")]),aside:a(()=>[s(e.$slots,"aside")]),"aside-custom":a(()=>[s(e.$slots,"aside-custom")]),default:a(()=>[s(e.$slots,"default")]),_:3},8,["frontmatter"])}}};export{N as default,v as usePageData};
