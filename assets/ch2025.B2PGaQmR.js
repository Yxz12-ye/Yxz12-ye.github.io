import{_}from"./ValaxyMain.vue_vue_type_style_index_0_lang.DqpzzbML.js";import"./chunks/@vueuse/motion.0Y_2at5v.js";import{a8 as S,ac as h,ab as c,af as a,L as k,al as v,ak as p,ae as d,aj as P,W as w,ah as u,ap as n,at as g,ao as y,aa as T,F as W,ag as l,Z as x}from"./framework.BW9VHYSl.js";import{e as G,u as H,a as L}from"./chunks/vue-router.zzCnNC-M.js";import"./app.iSYio0S6.js";import"./chunks/dayjs.BdcnXKr1.js";import"./chunks/vue-i18n.CJ3sQeW8.js";import"./chunks/pinia.B2j-_KG7.js";/* empty css                    */import"./chunks/nprogress.Bru8d7fl.js";import"./YunComment.vue_vue_type_style_index_0_lang.BA3bSQBU.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DtKq0lgV.js";const O={name:"SnowmanGame",data(){return{isPlaying:!1,showResult:!0,score:0,highScore:0,gameWidth:300,blockHeight:40,baseWidth:200,moveSpeed:2,stack:[],currentBlock:null,worldOffset:0,worldScale:1,animationFrame:null,showPerfectText:!1,perfectTimer:null}},computed:{worldStyle(){return{transform:`translateY(${this.worldOffset}px) scale(${this.worldScale})`,transformOrigin:"bottom center"}}},mounted(){const t=localStorage.getItem("snowman-highscore");t&&(this.highScore=parseInt(t)),window.addEventListener("keydown",this.handleKeydown),window.innerWidth<400&&(this.gameWidth=window.innerWidth-40),this.stack=[{width:this.baseWidth,left:(this.gameWidth-this.baseWidth)/2}]},beforeDestroy(){this.stopGame(!0),window.removeEventListener("keydown",this.handleKeydown)},methods:{startGame(){this.isPlaying||(this.showResult=!1,this.stack=[{width:this.baseWidth,left:(this.gameWidth-this.baseWidth)/2,isPerfect:!1}],this.score=0,this.worldOffset=0,this.worldScale=1,this.moveSpeed=2,setTimeout(()=>{this.spawnNextBlock(),this.isPlaying=!0,this.gameLoop()},300))},stopGame(t=!1){this.isPlaying=!1,cancelAnimationFrame(this.animationFrame),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snowman-highscore",this.highScore)),!t&&setTimeout(()=>{this.performOverviewZoom()},600)},performOverviewZoom(){const t=(this.stack.length+2)*this.blockHeight,s=500,m=40;if(t>s-m){const f=(s-m)/t;this.worldScale=f}else this.worldScale=1;this.worldOffset=0,setTimeout(()=>{this.showResult=!0},1e3)},handleAction(t){t&&t.type,!this.showResult&&this.isPlaying&&this.placeBlock()},handleKeydown(t){t.code==="Space"&&(t.preventDefault(),this.showResult?this.startGame():this.handleAction())},spawnNextBlock(){const t=this.stack[this.stack.length-1];this.currentBlock={width:t.width,left:0,direction:1}},gameLoop(){if(!this.isPlaying)return;const t=this.gameWidth-this.currentBlock.width;this.currentBlock.left+=this.moveSpeed*this.currentBlock.direction,this.currentBlock.left>=t?(this.currentBlock.left=t,this.currentBlock.direction=-1):this.currentBlock.left<=0&&(this.currentBlock.left=0,this.currentBlock.direction=1),this.animationFrame=requestAnimationFrame(this.gameLoop)},placeBlock(){const t=this.stack[this.stack.length-1],s=this.currentBlock,m=s.left-t.left,f=Math.abs(m);if(f>s.width){this.stopGame();return}let e=s.width-f,o=s.left,r=!1;f<3?(e=s.width,o=t.left,r=!0,this.triggerPerfectEffect()):m>0?o=s.left:o=t.left,this.stack.push({width:e,left:o,isPerfect:r}),this.score++,this.score%5===0&&(this.moveSpeed+=.5),this.stack.length>4&&(this.worldOffset=(this.stack.length-4)*this.blockHeight),this.spawnNextBlock()},triggerPerfectEffect(){this.showPerfectText=!0,this.perfectTimer&&clearTimeout(this.perfectTimer),this.perfectTimer=setTimeout(()=>{this.showPerfectText=!1},800)},getComment(t){return t<3?"åˆšå¼€å§‹å †å°±å€’äº†...":t<10?"æ˜¯ä¸ªä¸é”™çš„é›ªå¢©å­ï¼":t<20?"è¿™é›ªäººçœŸé«˜ï¼":"ä½ æ˜¯å †é›ªäººä¹‹ç¥žï¼"}}},C={class:"background-decor"},R={class:"game-viewport"},A={key:0,class:"button-decor"},F={class:"ui-layer"},N={key:0,class:"score-board"},D={key:0,class:"menu-overlay"},E={class:"result-box"},I={class:"final-score"},z={class:"high-score"},M={class:"comment"},V={key:0,class:"perfect-text"};function K(t,s,m,f,e,o){return c(),h("div",{class:"snowman-game-wrapper",onMousedown:s[2]||(s[2]=(...r)=>o.handleAction&&o.handleAction(...r)),onTouchstart:s[3]||(s[3]=g((...r)=>o.handleAction&&o.handleAction(...r),["prevent","stop"]))},[a("div",C,[s[4]||(s[4]=a("div",{class:"moon"},null,-1)),(c(),h(k,null,v(20,r=>a("div",{class:"snow-particle",key:r})),64))]),a("div",R,[a("div",{class:"game-world",style:p(o.worldStyle)},[(c(!0),h(k,null,v(e.stack,(r,i)=>(c(),h("div",{key:i,class:P(["snow-block",{"base-block":i===0,"perfect-glow":r.isPerfect}]),style:p({width:r.width+"px",left:r.left+"px",bottom:i*e.blockHeight+"px",height:e.blockHeight+"px",zIndex:i})},[i>0&&i%3===0?(c(),h("span",A,"âš«")):d("",!0)],6))),128)),e.isPlaying&&e.currentBlock?(c(),h("div",{key:0,class:"snow-block active-block",style:p({width:e.currentBlock.width+"px",left:e.currentBlock.left+"px",bottom:e.stack.length*e.blockHeight+"px",height:e.blockHeight+"px"})},[...s[5]||(s[5]=[a("div",{class:"face-preview"},[a("span",{class:"eye"},"."),a("span",{class:"eye"},".")],-1)])],4)):d("",!0),!e.isPlaying&&e.stack.length>0?(c(),h("div",{key:1,class:"top-hat",style:p({left:e.stack[e.stack.length-1].left+e.stack[e.stack.length-1].width/2-20+"px",bottom:e.stack.length*e.blockHeight+"px"})}," ðŸŽ© ",4)):d("",!0)],4)]),a("div",F,[e.isPlaying?(c(),h("div",N,u(e.score)+" å±‚",1)):d("",!0),w(y,{name:"fade-menu"},{default:n(()=>[e.showResult?(c(),h("div",D,[s[6]||(s[6]=a("h2",{class:"game-title"},"â›„ é›ªäººå †å †ä¹ â›„",-1)),a("div",E,[a("p",I,"æœ€ç»ˆé«˜åº¦: "+u(e.score)+" å±‚",1),a("p",z,"æœ€é«˜è®°å½•: "+u(e.highScore),1),a("div",M,u(o.getComment(e.score)),1)]),a("button",{class:"start-btn",onClick:s[0]||(s[0]=g((...r)=>o.startGame&&o.startGame(...r),["stop"])),onTouchstart:s[1]||(s[1]=g((...r)=>o.startGame&&o.startGame(...r),["stop"]))},u(e.score>0?"å†å †ä¸€ä¸ª":"å¼€å§‹å †é›ªäºº"),33),s[7]||(s[7]=a("p",{class:"tips"},"ç‚¹å‡»å±å¹•æ”¾ç½®é›ªå—",-1))])):d("",!0)]),_:1}),w(y,{name:"fade"},{default:n(()=>[e.showPerfectText?(c(),h("div",V,"å®Œç¾Ž!")):d("",!0)]),_:1})])],32)}const Z=S(O,[["render",K],["__scopeId","data-v-878a829f"]]),j=G("/festival/Christmas/ch2025",async t=>JSON.parse('{"title":"","description":"","frontmatter":{"toc":false,"aside":false,"sidebar":false},"headers":[],"relativePath":"pages/festival/Christmas/ch2025.md","lastUpdated":1765461220000}'),{lazy:(t,s)=>t.name===s.name}),nt={__name:"ch2025",setup(t,{expose:s}){const{data:m}=j(),f=L(),e=H(),o=Object.assign(e.meta.frontmatter||{},m.value?.frontmatter||{});return f.currentRoute.value.data=m.value,x("valaxy:frontmatter",o),globalThis.$frontmatter=o,s({frontmatter:{toc:!1,aside:!1,sidebar:!1}}),(i,q)=>{const b=Z,B=_;return c(),T(B,{frontmatter:W(o)},{"main-content-md":n(()=>[w(b)]),"main-header":n(()=>[l(i.$slots,"main-header")]),"main-header-after":n(()=>[l(i.$slots,"main-header-after")]),"main-nav":n(()=>[l(i.$slots,"main-nav")]),"main-content-before":n(()=>[l(i.$slots,"main-content-before")]),"main-content":n(()=>[l(i.$slots,"main-content")]),"main-content-after":n(()=>[l(i.$slots,"main-content-after")]),"main-nav-before":n(()=>[l(i.$slots,"main-nav-before")]),"main-nav-after":n(()=>[l(i.$slots,"main-nav-after")]),comment:n(()=>[l(i.$slots,"comment")]),footer:n(()=>[l(i.$slots,"footer")]),aside:n(()=>[l(i.$slots,"aside")]),"aside-custom":n(()=>[l(i.$slots,"aside-custom")]),default:n(()=>[l(i.$slots,"default")]),_:3},8,["frontmatter"])}}};export{nt as default,j as usePageData};
