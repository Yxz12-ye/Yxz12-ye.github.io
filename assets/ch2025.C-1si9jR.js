import{_}from"./ValaxyMain.vue_vue_type_style_index_0_lang.DYz-Ay_j.js";import"./chunks/@vueuse/motion.CfOaydB9.js";import{a8 as S,ac as f,ab as h,ae as l,af as a,L as g,al as v,ak as p,aj as P,W as k,ah as u,ap as n,at as w,ao as y,aa as T,F as W,ag as c,Z as x}from"./framework.Dtj2FOgl.js";import{e as A,u as G,a as H}from"./chunks/vue-router.BAt3aDh2.js";import"./app.BEkqb5mH.js";import"./chunks/dayjs.BdcnXKr1.js";import"./chunks/vue-i18n.-J8ISBuY.js";import"./chunks/pinia.ecF83nE_.js";/* empty css                    */import"./chunks/nprogress.B6x19dEb.js";import"./YunComment.vue_vue_type_style_index_0_lang.DgZ01wsw.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.BnNbMMRz.js";import"./post.DLBzRB45.js";const L={name:"SnowmanGame",data(){return{isPlaying:!1,showResult:!0,score:0,highScore:0,gameWidth:300,blockHeight:40,baseWidth:200,moveSpeed:2,stack:[],currentBlock:null,worldOffset:0,worldScale:1,animationFrame:null,showPerfectText:!1,perfectTimer:null}},computed:{worldStyle(){return{transform:`translateY(${this.worldOffset}px) scale(${this.worldScale})`,transformOrigin:"bottom center"}}},mounted(){const t=localStorage.getItem("snowman-highscore");t&&(this.highScore=parseInt(t)),window.addEventListener("keydown",this.handleKeydown),window.innerWidth<400&&(this.gameWidth=window.innerWidth-40),this.stack=[{width:this.baseWidth,left:(this.gameWidth-this.baseWidth)/2}]},beforeDestroy(){this.stopGame(!0),window.removeEventListener("keydown",this.handleKeydown)},methods:{startGame(){this.isPlaying||(this.showResult=!1,this.stack=[{width:this.baseWidth,left:(this.gameWidth-this.baseWidth)/2,isPerfect:!1}],this.score=0,this.worldOffset=0,this.worldScale=1,this.moveSpeed=2,setTimeout(()=>{this.spawnNextBlock(),this.isPlaying=!0,this.gameLoop()},300))},stopGame(t=!1){this.isPlaying=!1,cancelAnimationFrame(this.animationFrame),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snowman-highscore",this.highScore)),!t&&setTimeout(()=>{this.performOverviewZoom()},600)},performOverviewZoom(){const t=(this.stack.length+2)*this.blockHeight,s=500,m=40;if(t>s-m){const d=(s-m)/t;this.worldScale=d}else this.worldScale=1;this.worldOffset=0,setTimeout(()=>{this.showResult=!0},1e3)},handleAction(t){t&&t.type,!this.showResult&&this.isPlaying&&this.placeBlock()},handleKeydown(t){t.code==="Space"&&(t.preventDefault(),this.showResult?this.startGame():this.handleAction())},spawnNextBlock(){const t=this.stack[this.stack.length-1];this.currentBlock={width:t.width,left:0,direction:1}},gameLoop(){if(!this.isPlaying)return;const t=this.gameWidth-this.currentBlock.width;this.currentBlock.left+=this.moveSpeed*this.currentBlock.direction,this.currentBlock.left>=t?(this.currentBlock.left=t,this.currentBlock.direction=-1):this.currentBlock.left<=0&&(this.currentBlock.left=0,this.currentBlock.direction=1),this.animationFrame=requestAnimationFrame(this.gameLoop)},placeBlock(){const t=this.stack[this.stack.length-1],s=this.currentBlock,m=s.left-t.left,d=Math.abs(m);if(d>s.width){this.stopGame();return}let e=s.width-d,o=s.left,r=!1;d<3?(e=s.width,o=t.left,r=!0,this.triggerPerfectEffect()):m>0?o=s.left:o=t.left,this.stack.push({width:e,left:o,isPerfect:r}),this.score++,this.score%5===0&&(this.moveSpeed+=.5),this.stack.length>4&&(this.worldOffset=(this.stack.length-4)*this.blockHeight),this.spawnNextBlock()},triggerPerfectEffect(){this.showPerfectText=!0,this.perfectTimer&&clearTimeout(this.perfectTimer),this.perfectTimer=setTimeout(()=>{this.showPerfectText=!1},800)},getComment(t){return t<3?"åˆšå¼€å§‹å †å°±å€’äº†...":t<10?"æ˜¯ä¸ªä¸é”™çš„é›ªå¢©å­ï¼":t<20?"è¿™é›ªäººçœŸé«˜ï¼":"ä½ æ˜¯å †é›ªäººä¹‹ç¥žï¼"}}},O={class:"background-decor"},C={class:"game-viewport"},R={key:0,class:"button-decor"},F={class:"ui-layer"},N={key:0,class:"score-board"},D={key:0,class:"menu-overlay"},I={class:"result-box"},E={class:"final-score"},z={class:"high-score"},M={class:"comment"},V={key:0,class:"perfect-text"};function K(t,s,m,d,e,o){return h(),f(g,null,[l(` \r
    ä¿®å¤ç‚¹ 1: \r
    @touchstart.prevent.stop="handleAction" \r
    .prevent é˜»æ­¢é»˜è®¤æ»šåŠ¨/ç¼©æ”¾\r
    .stop é˜»æ­¢äº‹ä»¶å†’æ³¡\r
  `),a("div",{class:"snowman-game-wrapper",onMousedown:s[2]||(s[2]=(...r)=>o.handleAction&&o.handleAction(...r)),onTouchstart:s[3]||(s[3]=w((...r)=>o.handleAction&&o.handleAction(...r),["prevent","stop"]))},[l(" èƒŒæ™¯è£…é¥° "),a("div",O,[s[4]||(s[4]=a("div",{class:"moon"},null,-1)),(h(),f(g,null,v(20,r=>a("div",{class:"snow-particle",key:r})),64))]),l(" æ¸¸æˆåŒºåŸŸ "),a("div",C,[a("div",{class:"game-world",style:p(o.worldStyle)},[l(" å·²ç»å †å¥½çš„é›ªå— "),(h(!0),f(g,null,v(e.stack,(r,i)=>(h(),f("div",{key:i,class:P(["snow-block",{"base-block":i===0,"perfect-glow":r.isPerfect}]),style:p({width:r.width+"px",left:r.left+"px",bottom:i*e.blockHeight+"px",height:e.blockHeight+"px",zIndex:i})},[i>0&&i%3===0?(h(),f("span",R,"âš«")):l("v-if",!0)],6))),128)),l(" å½“å‰æ­£åœ¨ç§»åŠ¨çš„é›ªå— "),e.isPlaying&&e.currentBlock?(h(),f("div",{key:0,class:"snow-block active-block",style:p({width:e.currentBlock.width+"px",left:e.currentBlock.left+"px",bottom:e.stack.length*e.blockHeight+"px",height:e.blockHeight+"px"})},[...s[5]||(s[5]=[a("div",{class:"face-preview"},[a("span",{class:"eye"},"."),a("span",{class:"eye"},".")],-1)])],4)):l("v-if",!0),l(" å¤±è´¥æ—¶çš„å¸½å­ "),!e.isPlaying&&e.stack.length>0?(h(),f("div",{key:1,class:"top-hat",style:p({left:e.stack[e.stack.length-1].left+e.stack[e.stack.length-1].width/2-20+"px",bottom:e.stack.length*e.blockHeight+"px"})}," ðŸŽ© ",4)):l("v-if",!0)],4)]),l(" UI ç•Œé¢ "),a("div",F,[e.isPlaying?(h(),f("div",N,u(e.score)+" å±‚",1)):l("v-if",!0),k(y,{name:"fade-menu"},{default:n(()=>[e.showResult?(h(),f("div",D,[s[6]||(s[6]=a("h2",{class:"game-title"},"â›„ é›ªäººå †å †ä¹ â›„",-1)),a("div",I,[a("p",E,"æœ€ç»ˆé«˜åº¦: "+u(e.score)+" å±‚",1),a("p",z,"æœ€é«˜è®°å½•: "+u(e.highScore),1),a("div",M,u(o.getComment(e.score)),1)]),l(` \r
            ä¿®å¤ç‚¹ 2: æŒ‰é’®ä¹Ÿéœ€è¦å¤„ç† touchstartï¼Œé˜²æ­¢ç‚¹å‡»ç©¿é€æˆ–æ— å“åº” \r
            .stop é˜²æ­¢è§¦å‘å¤–å±‚çš„ handleAction\r
          `),a("button",{class:"start-btn",onClick:s[0]||(s[0]=w((...r)=>o.startGame&&o.startGame(...r),["stop"])),onTouchstart:s[1]||(s[1]=w((...r)=>o.startGame&&o.startGame(...r),["stop"]))},u(e.score>0?"å†å †ä¸€ä¸ª":"å¼€å§‹å †é›ªäºº"),33),s[7]||(s[7]=a("p",{class:"tips"},"ç‚¹å‡»å±å¹•æ”¾ç½®é›ªå—",-1))])):l("v-if",!0)]),_:1}),k(y,{name:"fade"},{default:n(()=>[e.showPerfectText?(h(),f("div",V,"å®Œç¾Ž!")):l("v-if",!0)]),_:1})])],32)],2112)}const Z=S(L,[["render",K],["__scopeId","data-v-878a829f"]]),j=A("/festival/Christmas/ch2025",async t=>JSON.parse('{"title":"","description":"","frontmatter":{"toc":false,"aside":false,"sidebar":false},"headers":[],"relativePath":"pages/festival/Christmas/ch2025.md","lastUpdated":1765461220000}'),{lazy:(t,s)=>t.name===s.name}),lt={__name:"ch2025",setup(t,{expose:s}){const{data:m}=j(),d=H(),e=G(),o=Object.assign(e.meta.frontmatter||{},m.value?.frontmatter||{});return d.currentRoute.value.data=m.value,x("valaxy:frontmatter",o),globalThis.$frontmatter=o,s({frontmatter:{toc:!1,aside:!1,sidebar:!1}}),(i,U)=>{const b=Z,B=_;return h(),T(B,{frontmatter:W(o)},{"main-content-md":n(()=>[k(b)]),"main-header":n(()=>[c(i.$slots,"main-header")]),"main-header-after":n(()=>[c(i.$slots,"main-header-after")]),"main-nav":n(()=>[c(i.$slots,"main-nav")]),"main-content-before":n(()=>[c(i.$slots,"main-content-before")]),"main-content":n(()=>[c(i.$slots,"main-content")]),"main-content-after":n(()=>[c(i.$slots,"main-content-after")]),"main-nav-before":n(()=>[c(i.$slots,"main-nav-before")]),"main-nav-after":n(()=>[c(i.$slots,"main-nav-after")]),comment:n(()=>[c(i.$slots,"comment")]),footer:n(()=>[c(i.$slots,"footer")]),aside:n(()=>[c(i.$slots,"aside")]),"aside-custom":n(()=>[c(i.$slots,"aside-custom")]),default:n(()=>[c(i.$slots,"default")]),_:3},8,["frontmatter"])}}};export{lt as default,j as usePageData};
